version: '3.8'
services:
  receiver:
    build:
      context: .
      dockerfile: Dockerfile
    command: python receiver.py
    ports:
      - "4010:4010"
    networks:
      - udp_network

  sender:
    build:
      context: .
      dockerfile: Dockerfile
    command: python dynamic_sliding_window.py
    depends_on:
      - receiver
    networks:
      - udp_network

  network_conditioner:
    build:
      context: .
      dockerfile: Dockerfile
    command: ./train.sh
    cap_add:
      - NET_ADMIN
    networks:
      - udp_network

networks:
  udp_network:
    driver: bridge
